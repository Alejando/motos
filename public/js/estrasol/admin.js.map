{"version":3,"sources":["app.js","public.js","router.js","controllers/actualizacionMasivaCtrl.js","controllers/edicionAvisoCtrl.js","controllers/edicionContenidoCtrl.js","controllers/edicionDeUsuarioCtrl.js","controllers/edicionGuiaCtrl.js","controllers/edicionSubastaCtrl.js","controllers/edicionminosTerCtrl.js","controllers/homeCtrl.js","controllers/listaClienteCtrl.js","controllers/mainCtrl.js","controllers/nuevaSubastaCtrl.js","controllers/subastaCtrl.js","controllers/subastasCtrl.js","controllers/usuariosListaCtrl.js","factories/ModelBase.js","factories/models/AuctionModel.js","factories/models/Paginacion.js","factories/models/User.js","controllers/public/indexCtrl.js","controllers/public/roomCtrl.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;ACHA;AACA;AACA;ACFA;AACA;AACA;AACA;ACHA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin.js","sourcesContent":["var glimglam = angular.module(\"glimglam\", [\n    'ngRoute',\n    'angular-clockpicker',\n    'ui.bootstrap',\n    'ui.bootstrap.datetimepicker',\n    'ngDropzone',\n    'textAngular',\n    'datatables',\n    'datatables.bootstrap'\n]);\n\nglimglam.constant('uiDatetimePickerConfig', {\n    dateFormat: 'yyyy-MM-dd HH:mm',\n    defaultTime: '00:00:00',\n    html5Types: {\n        date: 'yyyy-MM-dd',\n        'datetime-local': 'yyyy-MM-ddTHH:mm:ss.sss',\n        'month': 'yyyy-MM'\n    },\n    initialPicker: 'date',\n    reOpenDefault: false,\n    enableDate: true,\n    enableTime: true,\n    buttonBar: {\n        show: true,\n        now: {\n            show: true,\n            text: 'Now'\n        },\n        today: {\n            show: true,\n            text: 'Hoy'\n        },\n        clear: {\n            show: true,\n            text: 'Limpiar'\n        },\n        date: {\n            show: true,\n            text: 'Date'\n        },\n        time: {\n            show: true,\n            text: 'Time'\n        },\n        close: {\n            show: true,\n            text: 'Close'\n        }\n    },\n    closeOnDateSelection: true,\n    closeOnTimeNow: true,\n    appendToBody: false,\n    altInputFormats: [],\n    ngModelOptions: {},\n    saveAs: false,\n    readAs: false\n});\n","var glimglam = angular.module(\"glimglam\", ['ui-rangeSlider']); ","\nglimglam.config(function ($routeProvider) {\n    $routeProvider.\n            when('/', {\n                templateUrl: 'pages/admin/welcome.html',\n                controller: 'homeCtrl'\n            }).\n            when('subastas/sin-publicar', {\n                templateUrl: 'pages/admin/subastas-admin.html',\n                controller: 'nuevaSubastaCtrl'\n            })              \n    .when('/subastas/nueva', {\n        templateUrl: 'pages/admin/subastas-form.html',\n        controller: 'nuevaSubastaCtrl'\n    })\n    .when('/actulizar-masiva', { \n        templateUrl: 'pages/admin/actulizar-masiva.html',\n        controller: 'actualizacionMasivaCtrl'\n    })\n    .when('/subastas/:status', {\n        templateUrl: 'pages/admin/subastas-admin.html',\n        controller: 'subastasCtrl'\n    });\n    $routeProvider.when('/subasta/:code',{\n        templateUrl: 'pages/admin/subasta.html',\n        controller: 'subastaCtrl'\n    });     \n    \n    $routeProvider.when('/contenidos/:slug', {\n        templateUrl: 'pages/admin/form-contenidos.html',\n        controller: 'edicionContenidoCtrl'\n    });\n    $routeProvider.\n            when('/subastas/editar', {\n                templateUrl: 'pages/admin/subastas-form.html',\n                controller: 'edicionSubastaCtrl'\n            }).\n            when('/subastas/usuarios-lista', {\n                templateUrl: 'pages/admin/usuarios-lista.html',\n                controller: 'usuariosListaCtrl'\n            }).\n            when('/subastas/edicion-usuario', {\n                templateUrl: 'pages/admin/usuarios-lista.html',\n                controller: 'edicionDeUsuarioCtrl'\n            }).\n            when('/clientes', {\n                templateUrl: 'pages/admin/lista-clientes.html',\n                controller: 'listaClienteCtrl'\n            });\n//            when('/contenidos/acerca-de', {\n//                templateUrl: 'pages/admin/form-contenidos.html',\n//                controller: 'edicionContenidoCtrl'\n//            }).\n//            when('/contenidos/guia-de-uso', {\n//                templateUrl: 'pages/admin/form-contenidos.html',\n//                controller: 'edicionGuiaCtrl'\n//            }).\n//            when('/contenidos/terminos', {\n//                templateUrl: 'pages/admin/form-contenidos.html',\n//                controller: 'edicionminosTerCtrl'\n//            }).\n//            when('/contenidos/avisos', {\n//                templateUrl: 'pages/admin/form-contenidos.html',\n//                controller: 'edicionAvisoCtrl'\n//            })\n            ;\n});\n","glimglam.controller('actualizacionMasivaCtrl', function ($scope) {\n    $scope.titulo = \"Aviso de privacidad\";\n    $scope.$parent.subSeccion = \"Actualización Masiva\";\n});","glimglam.controller('edicionAvisoCtrl', function ($scope) {\n    $scope.titulo = \"Aviso de privacidad\";\n    $scope.$parent.subSeccion = \"Edición Contenido \\\"Aviso de privacidad\\\"\";\n});","glimglam.controller('edicionContenidoCtrl', function ($scope, $routeParams) {\n    $scope.$parent.subSeccion = \"Edición Contenido \\\"Acerca de\\\"\";\n    $scope.titulo = $routeParams.slug;\n});","\nglimglam.controller('edicionDeUsuarioCtrl', function ($scope) {\n    $scope.titulo = \"Edición de usuario\";\n});","glimglam.controller('edicionGuiaCtrl', function ($scope) {\n    $scope.$parent.subSeccion = \"Edición Contenido \\\"Guía de uso\\\"\";\n    $scope.titulo = \"Guía de uso \";\n});","glimglam.controller('edicionSubastaCtrl', function ($scope) {\n    $scope.titulo = \"Edición de subasta\";\n});","glimglam.controller('edicionminosTerCtrl', function ($scope) {\n    $scope.$parent.subSeccion = \"Edición de Contenido \\\"Términos y condiciones\\\"\";\n    $scope.titulo = \"Términos y condiciones\";\n});","glimglam.controller('homeCtrl', function ($scope) {\n    $scope.msj = \"Bienvenidos\";\n});","glimglam.controller('listaClienteCtrl', function ($scope, $routeParams, User, DTOptionsBuilder, DTColumnBuilder) {\n        $scope.$parent.subSeccion = \"Listado de clientes registrados\";\n\n\n    var status = $routeParams.status;\n    var self = this;\n    var btnsOptions = false;\n\n    \n    if($scope[\"fn_\" + status]){\n        $scope[\"fn_\" + status]();\n    }\n    $scope.allAuctions = [];\n    \n    $scope.dtOptions = DTOptionsBuilder.fromSource(User.getURLForAllDataTables())\n        .withOption('stateSave', true)\n        .withOption('scrollX', true)\n        .withPaginationType('full_numbers');\n    $scope.dtColumns = [];\n    \n    $scope.dtColumns.push(DTColumnBuilder.newColumn('id').withTitle('ID'));\n    if(btnsOptions){\n        var builder = DTColumnBuilder.newColumn(null).renderWith(btnsOptions).withTitle(\"Opciones\");\n        $scope.dtColumns.push(builder);\n    }\n    \n    var getRandomInt = function(min, max) {\n        return Math.floor(Math.random() * (max - min)) + min;\n    };\n    \n    $scope.dtColumns.push(DTColumnBuilder.newColumn('name').withTitle('Nombre')),\n//    $scope.dtColumns.push(DTColumnBuilder.newColumn('email').withTitle('email')),\n    $scope.dtColumns.push(DTColumnBuilder.newColumn(false).renderWith(function(){\n        return getRandomInt(0,30);\n    }).withTitle('Subastas Compradas'));\n    $scope.dtColumns.push(DTColumnBuilder.newColumn(false).renderWith(function(){\n        return getRandomInt(0,30);\n    }).withTitle('Subastas Ganadas'));\n    \n//        DTColumnBuilder.newColumn('lastName').withTitle('Last name').notVisible()\n    \n    $scope.newSource = User.getURLForAllDataTables();\n//    Auction.getAllForDataTables().then(function(datos){\n//        console.log(\"datos\", datos);\n//    });\n\n        \n        \n        \n        \n        \n        \n        \n        \n        \n        \n});","glimglam.controller('mainCtrl', function ($scope) {\n    $scope.msj = \"Main Controller\";\n    $scope.subSeccion = false;\n});","glimglam.controller('nuevaSubastaCtrl', function ($scope, $log, Auction) {\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de uis\">\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de hr inicial\">\n    $scope.optionsStartTime = {\n        donetext: 'Establecer Hr. de Inicio',\n        twelvehour: true,\n        nativeOnMobile: !true,\n        placement: 'bottom',\n        align: 'right'\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de hr final\">\n    $scope.optionsEndingTime = {\n        donetext: 'Establecer Hr. de Final',\n        twelvehour: true,\n        nativeOnMobile: true,\n        placement: 'bottom',\n        align: 'right'\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de datepiker Inicial\">\n    $scope.fechaInicio = {\n        date: new Date(),\n        datepickerOptions: {\n            showWeeks: false,\n            startingDay: 1,\n            language: 'es',\n            dateDisabled: function (data) {\n                return (data.mode === 'day' && (new Date().toDateString() == data.date.toDateString()));\n            }\n        }\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de datepiker final\">\n    $scope.picker2 = {\n        date: new Date('2015-03-01T00:00:00Z'),\n        datepickerOptions: {\n            showWeeks: false,\n            startingDay: 1,\n            language: 'es',\n            dateDisabled: function (data) {\n                return (data.mode === 'day' && (new Date().toDateString() == data.date.toDateString()));\n            }\n        }\n    };\n    \n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"configuracion de dropzone fotos\">\n    $scope.dropzoneConfig = {\n        parallelUploads: 3,\n        maxFileSize: 30,\n        url: 'file-upload',\n        dictDefaultMessage:'Click o arrastra una imagen aquí',\n        \n    };\n    $scope.dzProcessing = function () {\n      this.options.url = \"/api/auction/\"+$scope.auction.id+\"/addPhoto\";\n    };\n    $scope.dzAddedFile = function (file) {\n       $scope.$apply(function () {\n           $scope.pics.push(URL.createObjectURL(file));\n        });\n    };\n    $scope.removePic = function (pic){\n        $scope.pics.splice($scope.pics.indexOf(pic),1);\n    };\n    $scope.dzError = function (file, errorMessage) {\n        $log.log(errorMessage);\n    };\n    //</editor-fold>\n    //</editor-fold>\n    $scope.creating = false;\n    $scope.auction = new Auction({});\n    $scope.hrBegin = moment(new Date());\n    $scope.hrEnd = moment(new Date());\n    $scope.createNewAuction = function () {\n        var titleTemp = $scope.auction.title; \n        $scope.auction = new Auction({\n            title : titleTemp,\n            startDate : new Date(),\n            endDate : new Date()\n        });\n        $scope.auction.save().then(function(){\n            $scope.creating = true;\n        });\n    };\n    $scope.saveSaveAuction = function () {\n        $scope.auction.save();\n        window.open(\"#/subastas/en-proceso\",'_self');\n    };\n    $scope.openCalendar = function (e, picker) {\n        $scope[picker].open = true;\n    };\n    $scope.pics = [];\n    $scope.creando = false;\n    \n\n    $scope.$parent.subSeccion = \"Nueva Subasta\";\n    $scope.titulo = \"Nueva Subasta\";\n});\n","glimglam.controller('subastaCtrl', function ($scope, $routeParams, Auction, $http) {\n    $scope.msj = \"Main Controller\";\n    $scope.subSeccion = false;\n    $scope.auction;\n    $scope.photos = [];\n    \n    var code = $routeParams.code;\n    $scope.$parent.subSeccion=\"Detalle \" + code;\n    $scope.auction;\n    Auction.getByCode(code).then(function (auction) {\n        $scope.auction = auction;\n    });\n    return ;\n    Auction.getById($routeParams.id).then(function(a){\n        $scope.auction = a;\n        var url = laroute.route(Auction.aliasUrl())+'/'+a.id+\"/photos/\";\n        console.log(url);\n//        return ;\n        $http({\n            'method' : 'GET',\n//            'data' : data,\n            'url' : url\n        }).then(function(result) {\n            $scope.photos = result.data; \n        },function(r){\n           \n        });\n    });\n});","glimglam.controller('subastasCtrl', function ($scope, $routeParams, Auction, DTOptionsBuilder, DTColumnBuilder) {\n    var status = $routeParams.status;\n    var self = this;\n    var btnsOptions = false;\n    $scope['fn_en-proceso'] = function () {\n        $scope.$parent.subSeccion = \"Subastas en proceso\";\n        console.log(\"as\");\n    };\n    $scope['fn_terminadas'] = function () {\n        $scope.titulo = \"Terminados\";\n        $scope.$parent.subSeccion = \"Subastas terminadas\";\n       \n    };\n    $scope['fn_sin-publicar'] = function () {\n        $scope.titulo = \"No publicadas\";\n        $scope.$parent.subSeccion = \"Subastas sin publicar\";  \n        btnsOptions = function() {\n            return \"<button class=\\\"btn btn-primary\\\">Publicar</button>\";\n        };\n    };\n    \n    if($scope[\"fn_\" + status]){\n        $scope[\"fn_\" + status]();\n    }\n    $scope.allAuctions = [];\n    \n//    Auction.getAll().then(function(allAuctions){\n//        $scope.allAuctions = allAuctions;\n//    });\n    \n    $scope.dtOptions = DTOptionsBuilder.fromSource(Auction.getURLForAllDataTables())\n        .withOption('stateSave', true)\n        .withOption('scrollX', true)\n        .withPaginationType('full_numbers');\n    $scope.dtColumns = [];\n    \n    $scope.dtColumns.push(DTColumnBuilder.newColumn('id').withTitle('ID'));\n    if(btnsOptions){\n        var builder = DTColumnBuilder.newColumn(null).renderWith(btnsOptions).withTitle(\"Opciones\");\n        $scope.dtColumns.push(builder);\n    }\n    \n    $scope.dtColumns.push(DTColumnBuilder.newColumn(null).renderWith(function(data, type, full){\n            console.log(data, type, full);\n            return '<a href=\"#/subasta/'+full.code+'\">'+full.code+'</a>';\n        }).withTitle('Código'));\n    $scope.dtColumns.push(DTColumnBuilder.newColumn('startDate').withTitle('Fecha de Inicio')),\n    $scope.dtColumns.push(DTColumnBuilder.newColumn('endDate').withTitle('Fecha de termino')),\n    $scope.dtColumns.push(DTColumnBuilder.newColumn('title').withTitle('Titulo'));\n//        DTColumnBuilder.newColumn('lastName').withTitle('Last name').notVisible()\n    \n    $scope.newSource = Auction.getURLForAllDataTables();\n//    Auction.getAllForDataTables().then(function(datos){\n//        console.log(\"datos\", datos);\n//    });\n});","glimglam.controller('usuariosListaCtrl', function ($scope) {\n    $scope.titulo = \"Lista de Usuarios\";\n});","glimglam.factory('ModelBase', function (Paginacion, $q, $http, $timeout, $interval) {\n    //<editor-fold defaultstate=\"collapsed\" desc=\"constructor\">\n    var ModelBase = function (args) {\n        this.setProperties(args);\n        this.relations = {};\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"Metodos de Instancia (prototype)\">\n    ModelBase.prototype = {\n        //<editor-fold defaultstate=\"collapsed\" desc=\"setProperties\">\n        setProperties: function (data) {            \n            var self = this;\n            var atributes = self.model().attributes; \n            var setters = self.model().setters;\n            angular.forEach(atributes, function (attr) {\n                if(setters[attr]){\n                    self[attr] = setters[attr].apply(self,[data[attr]]);\n                    return;\n                }\n                self[attr] = data[attr];\n            });\n        },\n        selfUpdate : function (milisecons, $scope) {\n            \n            var self = this;\n            $interval(function() {\n                console.log(\"Inicia --- re\", milisecons);\n                self.refresh();\n            },milisecons);            \n        },\n        refresh : function () {\n            var data = {};\n            var self = this;\n            var $defer =  $q.defer();\n            var model = this.model();\n            data[model.aliasUrl()] = this.id;\n            var url = laroute.route(model.aliasUrl() + '.show', data);            \n            $http({\n                'method' : 'GET',\n                'url' : url\n            }).then(function(result) {\n                self.setProperties(result.data);\n            }, function(r) {                \n                $defer.reject(r);\n            });\n            return $defer;\n        },\n        getProperties : function () {\n            var self = this;\n            var data = {};\n            var attributes = self.model().attributes;\n            angular.forEach(attributes, function (attr){\n                data[attr] = self[attr];\n            });\n            return data;\n        },\n        create : function () {\n            var  data = this.getProperties();\n            var model = this.model();\n            var self = this;\n            var url = laroute.route(model.aliasUrl());        \n            var $defer = $q.defer();\n            $http({\n                'method' : 'POST',\n                'data' : data,\n                'url' : url\n            }).then(function(result) {\n                self.setProperties(result.data.model);\n                instancias =model.model().addCache(self);\n                $defer.resolve(model);\n            },function(r){\n                $defer.reject(r);\n            });\n            return $defer.promise;\n        },\n        update : function () {\n            console.log(\"Flata implementar actualizacion\");\n        },\n        save : function () {\n            if(this.id){\n                return this.update();\n            }\n            return this.create();\n        \n        },\n        getter : function (key){\n            return this[\"_obj_\" + key];\n        },\n        hasMany : function (Model, key) {\n            var self = this;\n            var defer = $q.defer();\n            var url = laroute.route(self.model().aliasUrl()  + '.relation',{\n                'id' : self.id,\n                'relation' :  key\n            });\n            $http({\n                'method' : 'GET',\n                'url' : url\n            }).then(function(result){                \n                var instancias = Model.build(result.data);\n                self.relations[key] = instancias;\n                defer .resolve(instancias);                                \n            },function(r) {                \n                defer .reject(r);\n            });\n            return defer.promise;\n        },\n        belongsTo : function (Model, key) {            \n            var self = this;\n            var defer = $q.defer();\n            var id = this[key + \"_id\"];\n            if(id) {\n                Model.getById(id).then(function(entidad) {                                  \n                    self.relations[key] = entidad;                         \n                    defer.resolve(entidad);\n                }, function(r){\n                    defer.reject(r);\n                });\n            } else {\n                $timeout(function() {\n                    defer.reject();\n                }, 10);\n            }\n            \n            return defer.promise;\n        }\n        //</editor-fold>\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"Metodos Estaticos\">\n    ModelBase.findCache = function(obj){        \n        var cache = this.model().cache;                       \n        obj = cache[obj.id];\n        if(obj){\n            return obj;\n        } else {\n            return false;\n        }\n    };\n    ModelBase.setFloat = function (value) {\n        return parseFloat(value);\n    },\n    //Helper para setear fechas \n    ModelBase.setDate = function (value) {\n        if(angular.isString(value)) {\n            return new Date(value);\n        }\n        return value;\n    };\n    ModelBase.model = function () {\n        return this.prototype.model();\n    };\n    ModelBase.getCache = function () {\n        return this.cache;\n    };    \n    ModelBase.RELATIONS = {\n        KEY : 0,\n        MODEL : 1,\n        FUNCTION : 2\n    };\n    \n    ModelBase.addRelation = function (key, fnModel, fn) {\n        var model = this.model();        \n        if(angular.isString(fn)){//funciones de relaciones por defecto                \n            switch(fn){\n                case 'belongsTo' : fn = function () {                           \n                        return this.belongsTo(fnModel, key);\n                    };\n                    model.attributes.push(key + \"_id\");\n                    break;\n                case 'hasMany' : fn = function () {                              \n                        return this.hasMany(fnModel, key);\n                    };\n                break;\n            }                \n        } \n        model.prototype[key] = fn;\n    };\n    \n    ModelBase.createModel = function (model, statics, prototype) {\n        angular.extend(model.prototype, ModelBase.prototype, prototype);\n        angular.extend(model, ModelBase, statics);\n        model.prototype.model = function () {            \n            return model;\n        };\n        model.cache = [];\n        angular.forEach(model.relations, function(v){            \n            var key = v[ModelBase.RELATIONS.KEY];            \n            var fn = v[ModelBase.RELATIONS.FUNCTION];\n            var fnModel = v[ModelBase.RELATIONS.MODEL];\n            model.addRelation(key,fnModel,fn);\n        });\n//        console.log(\"models->\"+model.attributes);\n        return model;\n    };\n    ModelBase.aliasUrl = function () {\n        return this.alias;\n    };\n    ModelBase.addCache = function(obj) {        \n        var Model = this.model();        \n        var cache = Model.getCache();\n        cache[obj.id] = obj;        \n        return obj;\n    };\n    //<editor-fold defaultstate=\"collapsed\" desc=\"build\">\n    ModelBase.build = function (data) {        \n        var Model = this.model(), obj;\n        if (angular.isArray(data)) {            \n            var arrInst = [];\n            var i = 0;\n            angular.forEach(data, function (d) {                \n                obj = Model.findCache(d);                                \n                if(obj) {\n                    console.log(d);\n                    obj.setProperties(d);\n                    arrInst.push(obj);\n                    i++;\n//                    console.log(\"ya en cache \" +i);\n                } else {\n                    obj = Model.addCache(new Model(d));  \n                    arrInst.push(obj);\n                }\n            });\n//            console.log(arrInst);\n            return arrInst;\n        }\n        obj = Model.findCache(data);\n        if(obj) {              \n            return obj;\n        } else {                        \n            obj = Model.addCache(new Model(data));\n        }\n        \n        return obj;\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"getAll\">\n    ModelBase.getAll = function () {\n        var self = this.model();\n        var url = laroute.route(this.aliasUrl());        \n        var $defer = $q.defer();\n        $http({\n            'method' : 'GET',\n            'params' : {\n                'paginacion' : false\n            },\n            'url' : url\n        }).then(function(result) {\n            var instancias =self.model().build(result.data);\n            $defer.resolve(instancias);\n        },function(r){\n            $defer.reject(r);\n        });\n        return $defer.promise;\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"paginado\">\n    ModelBase.paginado = function () {            \n        var self = this;        \n        var url = laroute.route(this.aliasUrl());\n        var $defer = $q.defer();        \n        $http({\n            'method' : 'GET',\n            'params' : { \n                'paginacion' : true\n            },\n            'url' : url\n        }).then(function(result) {\n            var arrInst = [], pojsos, paginacion;            \n                pojsos = result.data.data;\n                paginacion = new Paginacion.build(result.data, self.model());\n            $defer.resolve({\n                'instancias': arrInst,\n                'paginacion' : paginacion\n            });\n        });\n        return $defer.promise;\n    };\n    //</editor-fold>\n    ModelBase.remove = function () {\n        console.log(\"pediente crear metodo de eliminacion\");\n    };\n    ModelBase.save  = function () {\n        console.log(\"pendiente crear método de creacion/actualizacion\");\n    };\n    //<editor-fold defaultstate=\"collapsed\" desc=\"getURLForAllDataTables\">\n    ModelBase.getURLForAllDataTables = function () {\n        var self = this;\n        var url = laroute.route(self.model().aliasUrl()  + '.all-for-datatables', {});\n        return url;\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"getallForDataTables\">\n    ModelBase.getAllForDataTables = function() {\n        var self = this;\n        var url = self.getURLForAllDataTables();\n        var $defer = $q.defer();\n        $http({\n            'method' : 'GET',\n            'url' : url\n        }).then(function(result) {\n            $defer.resolve(result.data);\n        });\n        return $defer.promise;\n    };\n    //</editor-fold>\n    //<editor-fold defaultstate=\"collapsed\" desc=\"getById\">\n    ModelBase.getById = function(id, args) {        \n        var data = angular.extend(args || {} , {\n            id : id\n        });        \n        var self = this; \n        var $defer = $q.defer();                \n        var objCache = self.model().findCache(data);     \n//        console.log(objCache);\n        if(objCache !== false) {\n            $timeout(function() {\n                $defer.resolve(objCache);\n            }, 10);\n        } else {   \n            data = {};\n            data[this.aliasUrl()] = id;\n            var url = laroute.route(this.aliasUrl() + '.show', data);            \n            $http({\n                'method' : 'GET',\n                'url' : url\n            }).then(function(result) {\n                var instancias = self.model().build(result.data);\n                $defer.resolve(instancias);\n            }, function(r) {                \n                $defer.reject(r);\n            });\n        }\n        return $defer.promise;\n    };\n    //</editor-fold>\n    //</editor-fold>\n    return ModelBase;\n});\n","glimglam.factory('Auction', function (ModelBase,$q,$http) {    \n    var Auction = function (args) {\n        ModelBase.apply(this, arguments);\n    };\n    ModelBase.createModel(Auction , {   \n        FINISHED : 2,\n        STARTED : 1,\n        STAND_BY : 0,\n        //Tipos de portadas\n        COVER_HORIZOTAL : 'horizontal',\n        COVER_VERTICAL : 'vertical',\n        COVER_SLIDER_UPCOMING :'slider-upcoming',\n        alias: 'auction',\n        setters : {\n//            start_date : ModelBase.setDate,\n//            end_date : ModelBase.setDate,\n            max_offer : ModelBase.setFloat,\n            min_offer : ModelBase.setFloat\n        },\n        attributes: [\n            'id',\n            'title',\n            'code',\n            'description',\n            'max_bid',\n            'min_bid',\n            'max_offer',\n            'min_offer',\n            'username_top',\n            'user_top',\n            'delay',\n            'target',\n            'start_date',\n            'end_date',\n            'published',\n            'status',\n            'total_enrollments',\n            'inflows',\n            'sold_for',\n            'winner',\n            'last_offer',\n            'winnername'\n        ],\n        relations : [],\n        getByCode : function (code){\n            var $defer = $q.defer();\n            var url = laroute.route('auction.getByCode', {\n                'code' : code\n            });\n            var self = this;\n            $http({\n                'method' : 'GET',\n                'url' :  url\n            }).then(function(result){\n                $defer.resolve(self.build(result.data));\n            });\n            return $defer.promise;\n        },\n        getUpcoming : function (n, page) {\n            var _page = page?page:1;\n            var url = laroute.route('auction.upcoming', {\n                n:n,\n                page : _page\n            });\n            var $defer = $q.defer();\n            var self = this;\n            $http({\n                'method' : 'GET',\n                'url' :  url\n            }).then(function(result){\n                $defer.resolve(self.build(result.data.data));\n            });\n            return $defer.promise;\n        },\n        getFinished : function (n, page) {\n            var _page = page ? page : 1;\n            var url = laroute.route('auction.finished', {\n                n:n,\n                page : _page\n            });\n            var $defer = $q.defer();\n            var self = this;\n            $http({\n                'method': 'GET',\n                'url': url\n            }).then(function(result) {\n                $defer.resolve(self.build(result.data.data));\n            });\n            return $defer.promise;\n        },\n        getStarted : function (n, page){\n            var _page = page ? page:1;\n            var url = laroute.route('auction.started', {\n                n : n,\n                page : _page\n            });\n            var $defer = $q.defer();\n            var self = this;\n            $http({\n                'method' : 'GET',\n                'url' : url\n            }).then(function(result) {\n                $defer.resolve(self.build(result.data.data));\n            });\n            return $defer.promise;\n        }\n    }, {\n        placeBid : function (bid) {\n            var $defer = $q.defer();\n            var url = laroute.route('auction.place-bid');\n            console.log(url);\n            var data = {\n                code : this.code,\n                bid : bid\n            };\n            $http({\n                'method' : 'POST',\n                'url': url,\n                'data' : data\n            }).then(function(result) {\n                $defer.resolve(result.data);\n            }, function(r) {\n                $defer.reject(r);\n            });\n            return $defer.promise;\n        },\n        getUrlCover : function (version) {\n            var url = laroute.route('auction.getCover',{\n                version:version,\n                code: this.code\n            });\n            return url;\n        },\n        getStartDate : function () {\n            return \"Fecha de inicio\";\n        },\n        getEndDate : function () {\n            return \"Fecha de Termino\";\n        },\n        getStatusStr : function () {\n           switch(this.status) {\n               case Auction.STARTED: return \"Iniciada\";\n               case Auction.FINISHED: return \"Terminada\";\n               case Auction.STAND_BY: return \"En espera\";\n           }\n        },\n        isStarted : function(){\n            return  this.status == Auction.STARTED;\n        },\n        isFinished : function () {\n            return this.status == Auction.FINISHED;\n        }\n    });    \n    //<editor-fold defaultstate=\"collapsed\" desc=\"buscarFolio\">\n    return Auction;\n});","/* global angular, glimglam */\nglimglam.factory('Paginacion', function () {\n    var Paginacion = function (args) {        \n        this.setPropieties(args);\n    };\n    //Se hereda el prototipo base y se agregan los metodos personalizados\n    Paginacion.prototype = {\n        setPropieties: function (data) {            \n            var self = this;\n            var atributes = this.getAttributes();\n            angular.forEach(atributes, function (value) {                \n                self[value] = data[value];\n            });\n        },\n        getAttributes: function () {\n            return [\n                'current_page',\n                'from',\n                'last_page',\n                'next_page_url',\n                'per_page',\n                'prev_page_url',\n                'to',\n                'total'\n            ];\n        }\n    };\n    Paginacion.build = function (data) {        \n        return new Paginacion(data);\n    };\n    return Paginacion;\n});","glimglam.factory('User', function (ModelBase,$q,$http) {    \n    var User = function (args) {\n        ModelBase.apply(this, arguments);\n    };\n    ModelBase.createModel(User , {   \n        FINISHED : 2,\n        STARTED : 1,\n        STAND_BY : 0,\n        alias: 'user',\n//        cache : [],\n        setters : {\n            startDate : ModelBase.setDate,\n            endDate : ModelBase.setDate\n        },\n        attributes: [\n            'id',\n            'name',\n            'email'\n        ],\n        relations : []\n    }, {\n    });    \n    //<editor-fold defaultstate=\"collapsed\" desc=\"buscarFolio\">\n    return User;\n});","glimglam.controller('public.IndexCtrl', function ($scope, Auction) {\n//    $scope.titulo = \"Hello\";\n//    window.Auction = Auction;\n////    Auction.getAll().then(function(all) {\n//        console.log(all);\n//    });\n//    Auction.getByCode(\"SUB001\").then(function(byCode) {\n//        console.log(\"Auction byCode=> %o\", byCode);\n//        console.log(\"cover horizontal => %o\", byCode.getUrlCover(Auction.COVER_HORIZOTAL));\n//        console.log(\"cover vertical => %o\", byCode.getUrlCover(Auction.COVER_VERTICAL));\n//        console.log('cover slider => %o',  byCode.getUrlCover(Auction.COVER_SLIDER_UPCOMING));\n//    });\n//    Auction.getUpcoming(10).then(function(auctions) {\n//        console.log('diez proximas => %o', auctions);\n//    });\n//    Auction.getFinished(10).then(function(auctions) {\n//        console.log('las ultimas 10 terminadas => %o', auctions);\n//    });\n//    Auction.getStarted(10).then(function(auctions){\n//        console.log('las ultimas iniciadas => %o', auctions);\n//    });\n    \n    $scope.lastStarted = null;\n    \n    \n    //Fancybox producto\n    \n    \n    Auction.getStarted(1).then(function(auction) {\n        if(auction.length) {\n            $scope.lastStarted = auction[0];\n            $scope.lastStarted.selfUpdate(1500000, $scope);\n        } else {\n            Auction.getUpcoming(1).then(function(auction){\n                console.log(auction);\n                $scope.lastStarted = auction[0];\n                $scope.lastStarted.selfUpdate(1500000, $scope);\n            });\n        }\n    });\n});","glimglam.controller('public.roomCtrl', function ($scope, Auction) {\n    $scope.id_user = window.id_user;\n    $scope.objAuction = new Auction(auction);\n    console.log($scope.objAuction );\n    $scope.rangeOferta = {\n         min: 0,\n         max: $scope.objAuction.min_offer,\n         limitMax: $scope.objAuction.max_offer,\n         limitMin: $scope.objAuction.min_offer\n    };\n    $scope.placeBid = function(){\n        $scope.objAuction.placeBid($scope.rangeOferta.max).then(function(data) {\n            $scope.objAuction.refresh();\n        });\n    };\n    $scope.objAuction.selfUpdate(1000, $scope);\n});"],"sourceRoot":"/source/"}